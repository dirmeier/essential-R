<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="site_libs/jquery/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap/shim/respond.min.js"></script>
<script src="site_libs/jqueryui/jquery-ui.min.js"></script>
<link href="site_libs/tocify/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify/jquery.tocify.js"></script>
<script src="site_libs/navigation/tabsets.js"></script>
<link href="site_libs/font-awesome/css/font-awesome.min.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="theme.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 54px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 59px;
  margin-top: -59px;
}

.section h2 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h3 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h4 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h5 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h6 {
  padding-top: 59px;
  margin-top: -59px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Essential R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dirmeier/essential-R">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://twitter.com/simon_dirmeier/">
    <span class="fa fa fa fa-twitter-square fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<div id="good-practices" class="section level1">
<h1><span class="header-section-number">1</span> Good practices</h1>
<p>Continuous integration, version control and containerization are three of the many tools of a developer. Here, we quickly introduce how the three can be used for <code>R</code>.</p>
<div id="continuous-integration" class="section level2">
<h2><span class="header-section-number">1.1</span> Continuous integration</h2>
<p>Setting up continuous Integration: <code>Travis CI</code> and <code>AppVeyor</code></p>
<p>To be honest, doing all these steps is tedious and annoying. For that reason we set up <code>Travis CI</code> to take care of running our tests, static analysis and code coverage. Travis works for Mac and Unix.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">  <span class="kw">cat</span> ./newpkg/.travis.yml</code></pre></div>
<pre><code>## language: r
## 
## sudo: required
## dist: trusty
## 
## cache: packages
## 
## matrix:
##   include:
##     - compiler: gcc
##       addons:
##         apt:
##           sources:
##             - ubuntu-toolchain-r-test
##           packages:
##             - g++-5
##       env: COMPILER=g++-5
##     - compiler: clang
##       addons:
##         apt:
##           sources:
##             - ubuntu-toolchain-r-test
##             - llvm-toolchain-precise-3.7
##           packages:
##             - clang-3.7
##       env: COMPILER=clang++-3.7
## 
## env:
##   global:
##     - R_BUILD_ARGS=&quot;--no-build-vignettes --no-manual&quot;
##     - R_CHECK_ARGS=&quot;--no-build-vignettes --no-manual --as-cran&quot;
##     - LINTR_COMMENT_BOT=false
## 
## before_install:
##   - cd newpkg
## 
## r_packages:
##   - covr
##   - testthat
##   - lintr
## 
## after_script:
##   - tar -C .. -xf $PKG_TARBALL
##   - Rscript -e &#39;covr::codecov()&#39;
##   - Rscript -e &#39;lintr::lint_package()&#39;</code></pre>
<p>Check out Travis’ <a href="https://docs.travis-ci.com/">docs</a> for more info. What we are basically telling Travis to do is to check our package <code>--as-cran</code>, run the unit tests, do the code coverage and finally do a static code analysis.</p>
<p>In order to do the same for Windows machines, we also use AppVeyor.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">  <span class="kw">cat</span> ./newpkg/appveyor.yml</code></pre></div>
<pre><code>## # DO NOT CHANGE the &quot;init&quot; and &quot;install&quot; sections below
## 
## # Download script file from GitHub
## init:
##   ps: |
##         $ErrorActionPreference = &quot;Stop&quot;
##         Invoke-WebRequest http://raw.github.com/krlmlr/r-appveyor/master/scripts/appveyor-tool.ps1 -OutFile &quot;..\appveyor-tool.ps1&quot;
##         Import-Module &#39;..\appveyor-tool.ps1&#39;
## 
## install:
##   ps: Bootstrap
## 
## # Adapt as necessary starting from here
## 
## build_script:
##   - travis-tool.sh install_deps
## 
## test_script:
##   - travis-tool.sh run_tests
## 
## on_failure:
##   - 7z a failure.zip *.Rcheck\*
##   - appveyor PushArtifact failure.zip
## 
## artifacts:
##   - path: &#39;*.Rcheck\**\*.log&#39;
##     name: Logs
## 
##   - path: &#39;*.Rcheck\**\*.out&#39;
##     name: Logs
## 
##   - path: &#39;*.Rcheck\**\*.fail&#39;
##     name: Logs
## 
##   - path: &#39;*.Rcheck\**\*.Rout&#39;
##     name: Logs
## 
##   - path: &#39;\*_*.tar.gz&#39;
##     name: Bits
## 
##   - path: &#39;\*_*.zip&#39;
##     name: Bits</code></pre>
<p>Here, we only run some tests and checks, since we already got the code analysis and coverage.</p>
<p>Code coverage of our project yielded us the following results:</p>
<div align="center">
<p><img src="https://codecov.io/gh/dirmeier/essential-R/branch/master/graphs/sunburst.svg" alt="no img"></p>
</div>
<div style="text-align: center">
<p>Code coverage</p>
</div>
<p>If we check the travis log, we see it has succeeded, because all tests ran through. However, we have some lints we should fix.</p>
<pre><code>$ tar -C .. -xf $PKG_TARBALL
after_script.2
2.22s$ Rscript -e 'covr::codecov()'
$message
[1] "Coverage reports upload successfully"
$id
[1] "552fd0db-187b-434e-b37b-a0e4fcba7636"
$meta
$meta$status
[1] 200
$queued
[1] TRUE
$url
[1] "https://codecov.io/github/dirmeier/essential-R/commit/f24d277296f78512524f26f3ca3b31d202e122a1"
$uploaded
[1] TRUE
after_script.3
1.23s$ Rscript -e 'lintr::lint_package()'
R/bad_bad_file.R:3:1: style: lines should not be more than 80 characters.
                                                                              myRet = a+b
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
R/bad_bad_file.R:3:79: style: Variable and function names should be all lowercase.
                                                                              myRet = a+b
                                                                              ^~~~~
R/bad_bad_file.R:3:85: style: Use <-, not =, for assignment.
                                                                              myRet = a+b
                                                                                    ^
Warning message:
In readLines(filename) :
  incomplete final line found on '/home/travis/build/dirmeier/essential-R/newpkg/R/emptypRoject-package.R'
Done. Your build exited with 0.</code></pre>
<p>Fixing style related issues is essential since we want other people to be able to read our code easily. Good code also increases the number of users, because the package is more trusted than a <em>spaghetti code</em> package.</p>
<div>
<p><i>Beauty is more important in computing than anywhere else in technology because software is so complicated. Beauty is the ultimate defense against complexity.</i></p>
</div>
<div class="quote" style="margin-bottom: 5%">
<p>– David Gelernter</p>
</div>
</div>
<div id="version-control" class="section level2">
<h2><span class="header-section-number">1.2</span> Version control</h2>
<p>Aside from he fact that version control is great, putting your project on <code>GitHub</code> has the most prominent advantage that you can add badges to your <code>README.md</code> to show others about the state of your package, for instance repository, CI or code coverage status.</p>
<div align="center">
<p><img src="https://rawgit.com/dirmeier/essential-R/master/fig/readme_me.jpg" alt="oh no" width="750px"></p>
</div>
There’s a wide variety of badges to describe your project.
<div align="center">
<table>
<thead>
<tr class="header">
<th>Description</th>
<th>Badge</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Is the project passing on windows?</td>
<td><img src="https://ci.appveyor.com/api/projects/status/github/dirmeier/netReg?branch=master&svg=true"></td>
</tr>
<tr class="even">
<td>How long is it on Bioconductor?</td>
<td><img src="https://bioconductor.org/shields/years-in-bioc/netReg.svg" /></td>
</tr>
<tr class="odd">
<td>Is it installable using conda?</td>
<td><img src="https://anaconda.org/bioconda/netreg/badges/installer/conda.svg" /></td>
</tr>
<tr class="even">
<td>What is its version on CRAN?</td>
<td><img src="http://www.r-pkg.org/badges/version/datastructures?color=brightgreen" /></td>
</tr>
<tr class="odd">
<td>How often has it been downloaded?</td>
<td><img src="http://cranlogs.r-pkg.org/badges/grand-total/datastructures?color=brightgreen" /></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="docker" class="section level2">
<h2><span class="header-section-number">1.3</span> Docker</h2>
<p>todo (needed for debugging c++)</p>
</div>
</div>

<footer style="margin-top: 5%">
    <p style="font-size: 0.75em;">&copy; 2017 Simon Dirmeier (<a href="mailto:simon.dirmeier@web.de">simon.dirmeier@web.de</a>)
    </p>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
